<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org"> 
<head> 
<meta charset="UTF-8">
<title>Quản lý tác giả sách</title>
<!-- Phải thêm popper để không bị lỗi dropdown-menu -->
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
<style>
    th, td {
        text-align: center;
    }
</style>
</head>
<body>
	<div th:replace="~{admin/headeradmin :: header}"></div>
	<div class="container-fluid mb-4">
	    <h1>Quản lý tác giả sách</h1>
	    
	    <div class="mb-3">
	        <a th:href="@{/addauthor}" class="btn btn-primary">Thêm tác giả</a>
	    </div>
	    
	    <form class="form-inline my-2 my-lg-0" method="GET" th:action="@{/manageauthors}">
	    	<input class="form-control mr-sm-2" type="text" name="search" placeholder="Tìm kiếm từ khóa">
	    	<button class="btn btn-outline-primary my-2 my-sm-0" type="submit">Tìm kiếm</button>
		</form>
		
		<div th:if="${param.search != null && !param.search.isEmpty()}">
	        <div>
	            <p>Tìm kiếm từ khóa: <span th:text="${param.search}"></span></p>
	        </div>
	    </div>
	
	    <table class="table table-striped table-bordered mt-3">
	        <thead class="thead-dark">
	            <tr>
	            	<th scope="col" class="align-middle text-center">Mã</th> 
	                <th scope="col" class="align-middle text-center">Tên tác giả</th>
	                <th scope="col" class="align-middle text-center">Tiểu sử</th>
	                <th scope="col" class="align-middle text-center">Thao tác</th>
	            </tr>
	        </thead>
	        <tbody>
	            <th:block th:each="author : ${authors}">
	                <tr>
	                	<td class="align-middle text-center" th:text="${author.id}"></td>
	                    <td class="align-middle text-center" th:text="${author.name}"></td>
	                    <td class="align-middle text-center" th:text="${author.bio}"></td>
	                    <td class="align-middle text-center">
	                        <a th:href="@{/managedetailauthor(authorId=${author.id})}" class="btn btn-primary">Xem chi tiết</a>
	                    </td>
	                </tr>
	            </th:block>
	        </tbody>
	    </table>
	    
	    <div th:if="${totalPages > 1}">
	        <ul class="pagination">
	            <li th:if="${currentPage > 1}" class="page-item">
	                <a class="page-link" th:href="@{/manageauthors(page=${currentPage - 1})}">Trước</a>
	            </li>
	
	            <th:block th:each="pageNumber : ${#numbers.sequence(1, totalPages)}">
	                <li class="page-item" th:classappend="${pageNumber == currentPage ? 'active' : ''}">
	                    <th:block th:if="${pageNumber == currentPage}">
	                        <span class="page-link" th:text="${pageNumber}"></span>
	                    </th:block>
	                    <th:block th:unless="${pageNumber == currentPage}">
	                        <a class="page-link" th:inline="text" th:href="@{/manageauthors(page=${pageNumber})}" th:text="${pageNumber}"></a>
	                    </th:block>
	               <!---->
	            </th:block>
	
	            <li th:if="${currentPage < totalPages}" class="page-item">
	                <a class="page-link" th:href="@{/manageauthors(page=${currentPage + 1})}">Sau</a>
	            </li>
	        </ul>
	    </div>
    </div>
    <div th:replace="~{admin/footeradmin :: footer}"></div>
    <!-- Thêm các tệp tin JavaScript -->
    <script th:src="@{/js/jquery-3.4.1.slim.min.js}"></script>
    <script th:src="@{/js/popper.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
</body>
</html>